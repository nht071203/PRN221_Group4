var type_view_danh_muc=null,xhrAjax=null,key_search="all";$(".scroll-top").on("click",(function(){$("body,html").animate({scrollTop:0},500)})),$("#accordionExample").on("show.bs.collapse",(function(e){$(e.target).parents(".question-item").find(".question-title i").removeClass("icon-collapse-close"),$(e.target).parents(".question-item").find(".question-title i").addClass("icon-collapse-open")})),$("#accordionExample").on("hide.bs.collapse",(function(e){$(e.target).parents(".question-item").find(".question-title i").removeClass("icon-collapse-open"),$(e.target).parents(".question-item").find(".question-title i").addClass("icon-collapse-close")}));var lastScrollTop=0;function openLink(e,t=null){null==t?location.href=e:window.open(e)}$(window).on("scroll",(function(e){if($(this).scrollTop()>124){var t=$(this).scrollTop();$(this).width()>=992&&(t>lastScrollTop?$("#header-nav").addClass("is-sticky"):$("#header-nav").removeClass("is-sticky")),lastScrollTop=t}else $("#header-nav").removeClass("is-sticky")}));var click_toggle=!1,list_cate_menu_course=[],list_cate_menu_store=[];function showSideBarLevel(e){loadViewCate(e),$("#sidebar-lv").addClass("open")}function updateKeySearch(){null!=(key_search=sessionStorage.getItem("key_search"))&&($(".dropdown-select-search .dropdown-item").removeClass("active"),$('.dropdown-select-search .dropdown-item[data-search="'+key_search+'"]').addClass("active"),$('input[name="key_search"]').val(key_search),$(".key-search-title").text($('.dropdown-select-search .dropdown-item[data-search="'+key_search+'"]').html()),$('input[name="q_search"]').attr("placeholder","Tìm kiếm "+$('.dropdown-select-search .dropdown-item[data-search="'+key_search+'"]').html()))}function deleteValSearch(){$('input[name="q_search"]').val("")}function renderViewNav(e){let t="",a="",o="",s=null;s="course"==e?list_cate_menu_course:list_cate_menu_store,$.each(s,((e,o)=>{o.active?t+='<a class="nav-level-item active py-2" data-key=\''+e+"' href='"+o.url+"'>"+o.cat_title+"</a>":t+='<a class="nav-level-item py-2" data-key=\''+e+"' href='"+o.url+"'>"+o.cat_title+"</a>",o.active&&$.each(o.cat_childs,((e,t)=>{a+='<div class="col-xl-4">',a+='<div style="max-width: 225px">',a+='<a class="nav-level-item py-2" href=\''+t.url+"'>"+t.cat_title+"</a>",a+="</div></div>"}))})),$.each(s,((e,t)=>{o+="<li class='nav-item d-flex'><a class=\"nav-link text-white w-100 \" data-key='"+e+"' href='"+t.url+"'>"+t.cat_title+"</a><div class='text-center d-flex mx-4 toggle-level-three pointer' data-key='"+e+"'><i class=\"fal fa-angle-right text-white f-24 my-auto\" style='width: 24px;'></i></div></li>"})),$(".nav-level-two").html(t),$(".sidebar-level-two .sidebar-dynamic-menu").html(o),$(".nav-level-three .row").html(a),type_view_danh_muc=e}function loadViewCate(e){$(".dropdown-menu--new-cate--show-right").html($(".nav-menu--show-"+e).html()),$("img.lazyload").length>0&&$(".dropdown-menu--new-cate--show-right img.lazyload").lazyload({effect:"fadeIn",threshold:.1}),"course"==e&&list_cate_menu_course.length>0||"store"==e&&list_cate_menu_store.length>0?renderViewNav(e):"course"==e||"store"==e?(null!=xhrAjax&&xhrAjax.abort(),xhrAjax=$.ajax({url:"/api/menu-danh-muc/"+e}).done((t=>{t.success?("course"==e&&(list_cate_menu_course=t.cats),"store"==e&&(list_cate_menu_store=t.cats),renderViewNav(e),type_view_danh_muc=e,xhrAjax=null):(console.log("Không lấy được dữ liệu hiển thị 1","danger"),xhrAjax=null)})).fail((e=>{console.log("Không lấy được dữ liệu hiển thị 2","danger"),xhrAjax=null}))):type_view_danh_muc=e}function showSearchMb(){$("#header-nav").css("display"),$(".show-search-mb").hasClass("active")?($(".show-search-mb").removeClass("active"),$(".show-search-mb").stop().animate({top:"-80px"},300,"linear")):($(".show-search-mb").addClass("active"),$(".show-search-mb").stop().animate({top:"0"},300,"linear"),$(".show-search-mb input").focus())}$(document).on("ready",(function(){updateKeySearch(),$(".dropdown-select-search .dropdown-item").on("focusin click",(function(){key_search=$(this).attr("data-search"),sessionStorage.setItem("key_search",key_search),updateKeySearch()}));$(".dropdown-cate").on("mousedown",(function(){!0}));var e=!0;$(document).on("click",(function(t){e=!0})),$(".dropdown").on({"shown.bs.dropdown":function(e){$(e.target).find(".dropdown-menu--new-cate").length&&null==type_view_danh_muc&&loadViewCate("course")},click:function(t){$(t.target).attr("href")&&(location.href=$(t.target).attr("href")),e=!0,$(".overlay--menu-cate").is(t.target)||$(".close--menu-cate").is(t.target)||$(t.target).parents(".close--menu-cate").length||($(".dropdown-menu").is(t.target)||$(t.target).parents(".dropdown-menu").length)&&(e=!1)},"hide.bs.dropdown":function(t){return e}}),$(".dropdown-cate").hover((function(){$(".dropdown-menu-cate-level").removeClass("active"),$(".dropdown-item").removeClass("active"),$(this).find(">.dropdown-item").addClass("active"),$(this).find(".dropdown-menu-cate-level").addClass("active"),null!=$(this).attr("data-type")&&loadViewCate($(this).attr("data-type"))})),$('input[name="q_search"]').on("input",(function(){$('input[name="q_search"]').val($(this).val())})),$(".show-search-mb").focusout((function(e){$(e.target).parents(".show-search-mb")||($(".show-search-mb").removeClass("active"),$(".show-search-mb").stop().animate({top:"-80px"},300,"linear"))}))})),$(document).on("mouseover",".nav-level-two .nav-level-item",(function(e){if($(e.target).hasClass("active"))return;let t=$(e.target).attr("data-key");"course"==type_view_danh_muc?$.each(list_cate_menu_course,((e,a)=>{list_cate_menu_course[e].active=t==e?1:0})):$.each(list_cate_menu_store,((e,a)=>{list_cate_menu_store[e].active=t==e?1:0})),renderViewNav(type_view_danh_muc)})),$(document).on("mouseover",".dropdown-item-child",(function(){$(".dropdown-item-child").find(".dropdown-menu").removeClass("show"),$(this).find(".dropdown-menu").addClass("show"),$(".dropdown-item-child").find(".dropdown-item").removeClass("active"),$(this).find(">.dropdown-item").addClass("active"),$(this).find(".dropdown-menu").addClass("active")})),$(document).on("click",".toggle-level-three",(function(e){let t;t=$(".toggle-level-three").is(e.target)?$(e.target).attr("data-key"):$(e.target).parents(".toggle-level-three").attr("data-key"),console.log(t),"course"==type_view_danh_muc?$.each(list_cate_menu_course,((e,a)=>{list_cate_menu_course[e].active=t==e?1:0})):$.each(list_cate_menu_store,((e,a)=>{list_cate_menu_store[e].active=t==e?1:0}));let a=null;a="course"==type_view_danh_muc?list_cate_menu_course:list_cate_menu_store;let o="";$.each(a,((e,t)=>{console.log(t),t.active&&(console.log(t),$.each(t.cat_childs,((e,t)=>{o+="<li class='nav-item d-flex'><a class=\"nav-link text-white w-100 \" data-key='"+e+"' href='"+t.url+"'>"+t.cat_title+"</a></li>"})))})),console.log(o),$(".sidebar-level-three .sidebar-dynamic-menu").html(o),$("#sidebar-lv--three").addClass("open")}));
